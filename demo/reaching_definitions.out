STDOUT:

STDERR:
CFG lowering error in function foo: MalformedPhiInfo(MalformedPhiInfo { infos: [SingleMalformedPhiInfo { bb_id: bb4, phi_dest: ValueRef(24, 87..88, Some(VarId(2)), None), phi_var_id: Some(VarId(2)), sources: {bb3: Value(ValueRef(11, 172..175, Some(VarId(2)), None))}, missing_sources: {bb2} }, SingleMalformedPhiInfo { bb_id: bb5, phi_dest: ValueRef(25, 87..88, Some(VarId(2)), None), phi_var_id: Some(VarId(2)), sources: {bb1: Value(ValueRef(6, 123..126, Some(VarId(2)), None)), bb4: Value(ValueRef(24, 87..88, Some(VarId(2)), None))}, missing_sources: {bb4} }, SingleMalformedPhiInfo { bb_id: bb8, phi_dest: ValueRef(39, 87..88, Some(VarId(2)), None), phi_var_id: Some(VarId(2)), sources: {bb6: Value(ValueRef(33, 87..88, Some(VarId(2)), Some(bb5))), bb7: Value(ValueRef(34, 87..88, Some(VarId(2)), Some(bb5)))}, missing_sources: {bb6, bb7} }, SingleMalformedPhiInfo { bb_id: bb8, phi_dest: ValueRef(26, 98..99, Some(VarId(3)), None), phi_var_id: Some(VarId(3)), sources: {bb6: Value(ValueRef(16, 215..218, Some(VarId(3)), None)), bb7: Value(ValueRef(18, 241..244, Some(VarId(3)), None))}, missing_sources: {bb6} }], malformed_assignments: [SingleMalformedAssignmentInfo { bb_id: bb6, dest_val: ValueRef(15, 217..218, Some(VarId(2)), None), assigned_val: Value(ValueRef(33, 87..88, Some(VarId(2)), Some(bb5))), missing_sources: {} }, SingleMalformedAssignmentInfo { bb_id: bb6, dest_val: ValueRef(16, 215..218, Some(VarId(3)), None), assigned_val: Value(ValueRef(15, 217..218, Some(VarId(2)), None)), missing_sources: {} }, SingleMalformedAssignmentInfo { bb_id: bb8, dest_val: ValueRef(19, 263..264, Some(VarId(3)), None), assigned_val: Value(ValueRef(26, 98..99, Some(VarId(3)), None)), missing_sources: {} }], phi_assignments: [SingleMalformedAssignmentInfo { bb_id: bb6, dest_val: ValueRef(33, 87..88, Some(VarId(2)), Some(bb5)), assigned_val: Value(ValueRef(25, 87..88, Some(VarId(2)), None)), missing_sources: {bb4, bb5} }, SingleMalformedAssignmentInfo { bb_id: bb7, dest_val: ValueRef(34, 87..88, Some(VarId(2)), Some(bb5)), assigned_val: Value(ValueRef(25, 87..88, Some(VarId(2)), None)), missing_sources: {bb4, bb5} }], malformed_tails: [SingleMalformedTailInfo { bb_id: bb8, missing_sources: {} }], blocks: [BasicBlock { id: bb0, phi: [], instructions: [Assign { dest: ValueRef(0, 68..69, Some(VarId(0)), None), val: Param { param_index: 0 } }, Assign { dest: ValueRef(1, 75..76, Some(VarId(1)), None), val: Param { param_index: 1 } }, Assign { dest: ValueRef(2, 108..109, Some(VarId(0)), None), val: Value(ValueRef(0, 68..69, Some(VarId(0)), None)) }, Assign { dest: ValueRef(3, 110..111, None, None), val: Const(0) }, Assign { dest: ValueRef(4, 108..111, None, None), val: LtCheck { left: ValueRef(2, 108..109, Some(VarId(0)), None), right: ValueRef(3, 110..111, None, None) } }], tail: CondBranch { cond: ValueRef(4, 108..111, None, None), then_bb: bb1, else_bb: bb2 }, successors: [bb1, bb2], predecessors: [] }, BasicBlock { id: bb1, phi: [], instructions: [Assign { dest: ValueRef(21, 75..76, Some(VarId(1)), Some(bb0)), val: Value(ValueRef(1, 75..76, Some(VarId(1)), None)) }, Assign { dest: ValueRef(20, 68..69, Some(VarId(0)), Some(bb0)), val: Value(ValueRef(0, 68..69, Some(VarId(0)), None)) }, Assign { dest: ValueRef(5, 125..126, None, None), val: Const(1) }, Assign { dest: ValueRef(6, 123..126, Some(VarId(2)), None), val: Value(ValueRef(5, 125..126, None, None)) }], tail: UncondBranch { target: bb5 }, successors: [bb5], predecessors: [bb0] }, BasicBlock { id: bb2, phi: [], instructions: [Assign { dest: ValueRef(23, 75..76, Some(VarId(1)), Some(bb0)), val: Value(ValueRef(1, 75..76, Some(VarId(1)), None)) }, Assign { dest: ValueRef(22, 68..69, Some(VarId(0)), Some(bb0)), val: Value(ValueRef(0, 68..69, Some(VarId(0)), None)) }, Assign { dest: ValueRef(7, 153..154, Some(VarId(0)), None), val: Value(ValueRef(22, 68..69, Some(VarId(0)), Some(bb0))) }, Assign { dest: ValueRef(8, 155..156, None, None), val: Const(0) }, Assign { dest: ValueRef(9, 153..156, None, None), val: GtCheck { left: ValueRef(7, 153..154, Some(VarId(0)), None), right: ValueRef(8, 155..156, None, None) } }], tail: CondBranch { cond: ValueRef(9, 153..156, None, None), then_bb: bb3, else_bb: bb4 }, successors: [bb3, bb4], predecessors: [bb0] }, BasicBlock { id: bb3, phi: [], instructions: [Assign { dest: ValueRef(28, 75..76, Some(VarId(1)), Some(bb2)), val: Value(ValueRef(23, 75..76, Some(VarId(1)), Some(bb0))) }, Assign { dest: ValueRef(27, 68..69, Some(VarId(0)), Some(bb2)), val: Value(ValueRef(22, 68..69, Some(VarId(0)), Some(bb0))) }, Assign { dest: ValueRef(10, 174..175, None, None), val: Const(2) }, Assign { dest: ValueRef(11, 172..175, Some(VarId(2)), None), val: Value(ValueRef(10, 174..175, None, None)) }], tail: UncondBranch { target: bb4 }, successors: [bb4], predecessors: [bb2] }, BasicBlock { id: bb4, phi: [PhiCfgInstruction { dest: ValueRef(24, 87..88, Some(VarId(2)), None), sources: {bb3: Value(ValueRef(11, 172..175, Some(VarId(2)), None))}, var_id: Some(VarId(2)), phi_type: Infer }, PhiCfgInstruction { dest: ValueRef(29, 68..69, Some(VarId(0)), None), sources: {bb2: Value(ValueRef(22, 68..69, Some(VarId(0)), Some(bb0))), bb3: Value(ValueRef(27, 68..69, Some(VarId(0)), Some(bb2)))}, var_id: Some(VarId(0)), phi_type: Infer }, PhiCfgInstruction { dest: ValueRef(30, 75..76, Some(VarId(1)), None), sources: {bb2: Value(ValueRef(23, 75..76, Some(VarId(1)), Some(bb0))), bb3: Value(ValueRef(28, 75..76, Some(VarId(1)), Some(bb2)))}, var_id: Some(VarId(1)), phi_type: Infer }], instructions: [], tail: UncondBranch { target: bb5 }, successors: [bb5], predecessors: [bb2, bb3] }, BasicBlock { id: bb5, phi: [PhiCfgInstruction { dest: ValueRef(25, 87..88, Some(VarId(2)), None), sources: {bb1: Value(ValueRef(6, 123..126, Some(VarId(2)), None)), bb4: Value(ValueRef(24, 87..88, Some(VarId(2)), None))}, var_id: Some(VarId(2)), phi_type: Infer }, PhiCfgInstruction { dest: ValueRef(31, 68..69, Some(VarId(0)), None), sources: {bb1: Value(ValueRef(20, 68..69, Some(VarId(0)), Some(bb0))), bb4: Value(ValueRef(29, 68..69, Some(VarId(0)), None))}, var_id: Some(VarId(0)), phi_type: Infer }, PhiCfgInstruction { dest: ValueRef(32, 75..76, Some(VarId(1)), None), sources: {bb1: Value(ValueRef(21, 75..76, Some(VarId(1)), Some(bb0))), bb4: Value(ValueRef(30, 75..76, Some(VarId(1)), None))}, var_id: Some(VarId(1)), phi_type: Infer }], instructions: [Assign { dest: ValueRef(12, 200..201, Some(VarId(1)), None), val: Value(ValueRef(32, 75..76, Some(VarId(1)), None)) }, Assign { dest: ValueRef(13, 202..203, None, None), val: Const(0) }, Assign { dest: ValueRef(14, 200..203, None, None), val: GtCheck { left: ValueRef(12, 200..201, Some(VarId(1)), None), right: ValueRef(13, 202..203, None, None) } }], tail: CondBranch { cond: ValueRef(14, 200..203, None, None), then_bb: bb6, else_bb: bb7 }, successors: [bb6, bb7], predecessors: [bb1, bb4] }, BasicBlock { id: bb6, phi: [], instructions: [Assign { dest: ValueRef(36, 75..76, Some(VarId(1)), Some(bb5)), val: Value(ValueRef(32, 75..76, Some(VarId(1)), None)) }, Assign { dest: ValueRef(35, 68..69, Some(VarId(0)), Some(bb5)), val: Value(ValueRef(31, 68..69, Some(VarId(0)), None)) }, Assign { dest: ValueRef(33, 87..88, Some(VarId(2)), Some(bb5)), val: Value(ValueRef(25, 87..88, Some(VarId(2)), None)) }, Assign { dest: ValueRef(15, 217..218, Some(VarId(2)), None), val: Value(ValueRef(33, 87..88, Some(VarId(2)), Some(bb5))) }, Assign { dest: ValueRef(16, 215..218, Some(VarId(3)), None), val: Value(ValueRef(15, 217..218, Some(VarId(2)), None)) }], tail: UncondBranch { target: bb8 }, successors: [bb8], predecessors: [bb5] }, BasicBlock { id: bb7, phi: [], instructions: [Assign { dest: ValueRef(38, 75..76, Some(VarId(1)), Some(bb5)), val: Value(ValueRef(32, 75..76, Some(VarId(1)), None)) }, Assign { dest: ValueRef(37, 68..69, Some(VarId(0)), Some(bb5)), val: Value(ValueRef(31, 68..69, Some(VarId(0)), None)) }, Assign { dest: ValueRef(34, 87..88, Some(VarId(2)), Some(bb5)), val: Value(ValueRef(25, 87..88, Some(VarId(2)), None)) }, Assign { dest: ValueRef(17, 243..244, None, None), val: Const(0) }, Assign { dest: ValueRef(18, 241..244, Some(VarId(3)), None), val: Value(ValueRef(17, 243..244, None, None)) }], tail: UncondBranch { target: bb8 }, successors: [bb8], predecessors: [bb5] }, BasicBlock { id: bb8, phi: [PhiCfgInstruction { dest: ValueRef(26, 98..99, Some(VarId(3)), None), sources: {bb6: Value(ValueRef(16, 215..218, Some(VarId(3)), None)), bb7: Value(ValueRef(18, 241..244, Some(VarId(3)), None))}, var_id: Some(VarId(3)), phi_type: Infer }, PhiCfgInstruction { dest: ValueRef(39, 87..88, Some(VarId(2)), None), sources: {bb6: Value(ValueRef(33, 87..88, Some(VarId(2)), Some(bb5))), bb7: Value(ValueRef(34, 87..88, Some(VarId(2)), Some(bb5)))}, var_id: Some(VarId(2)), phi_type: Infer }, PhiCfgInstruction { dest: ValueRef(40, 68..69, Some(VarId(0)), None), sources: {bb6: Value(ValueRef(35, 68..69, Some(VarId(0)), Some(bb5))), bb7: Value(ValueRef(37, 68..69, Some(VarId(0)), Some(bb5)))}, var_id: Some(VarId(0)), phi_type: Infer }, PhiCfgInstruction { dest: ValueRef(41, 75..76, Some(VarId(1)), None), sources: {bb6: Value(ValueRef(36, 75..76, Some(VarId(1)), Some(bb5))), bb7: Value(ValueRef(38, 75..76, Some(VarId(1)), Some(bb5)))}, var_id: Some(VarId(1)), phi_type: Infer }], instructions: [Assign { dest: ValueRef(19, 263..264, Some(VarId(3)), None), val: Value(ValueRef(26, 98..99, Some(VarId(3)), None)) }], tail: Return { value: Some(ValueRef(19, 263..264, Some(VarId(3)), None)) }, successors: [], predecessors: [bb6, bb7] }] })
error: Use before initialization detected during CFG lowering
   ┌─ demo/reaching_definitions.c:14:11
   │
 4 │     int x;
   │         - Variable declaration site
   ·
14 │         y=x;
   │           ^ value not valid due to prior malformed phi
   │
   = note: this means that there are assignments to this variable, but not on all possible code paths

error: Use before initialization detected during CFG lowering
   ┌─ demo/reaching_definitions.c:14:9
   │
14 │         y=x;
   │         ^^^
   │         │ │
   │         │ Variable declaration site
   │         value not valid due to prior malformed phi
   │
   = note: this means that there are assignments to this variable, but not on all possible code paths

error: Use before initialization detected during CFG lowering
   ┌─ demo/reaching_definitions.c:18:12
   │
 5 │     int y;
   │         - Variable declaration site
   ·
18 │     return y;
   │            ^ value not valid due to prior malformed phi
   │
   = note: this means that there are assignments to this variable, but not on all possible code paths

---
digraph MalformedPhiInfo {
  node [shape=box, fontname="Courier New", fontsize=10];
  edge [fontname="Courier New", fontsize=9];
  bb0 [label="bb0:\n    %0 = param[0] (a)\n    %1 = param[1] (b)\n    %2 = %0 (a)\n    %3 = const.i64 0\n    %4 = lt %2, %3\n    br_cond %4 ? bb1 : bb2\n"];
  bb1 [label="bb1:\n    %21 = %1 (b)\n    %20 = %0 (a)\n    %5 = const.i64 1\n    %6 = %5 (x)\n    br bb5\n"];
  bb2 [label="bb2:\n    %23 = %1 (b)\n    %22 = %0 (a)\n    %7 = %22 (a)\n    %8 = const.i64 0\n    %9 = gt %7, %8\n    br_cond %9 ? bb3 : bb4\n"];
  bb3 [label="bb3:\n    %28 = %23 (b)\n    %27 = %22 (a)\n    %10 = const.i64 2\n    %11 = %10 (x)\n    br bb4\n"];
  bb4 [label="bb4:\n    %24 = Φ(%11@bb3 [malformed: missing from BBs [bb2]]) (x)\n    %29 = Φ(%22@bb2, %27@bb3) (a)\n    %30 = Φ(%23@bb2, %28@bb3) (b)\n    br bb5\n"];
  bb5 [label="bb5:\n    %25 = Φ(%6@bb1, %24@bb4 [malformed: missing from BBs [bb4]]) (x)\n    %31 = Φ(%20@bb1, %29@bb4) (a)\n    %32 = Φ(%21@bb1, %30@bb4) (b)\n    %12 = %32 (b)\n    %13 = const.i64 0\n    %14 = gt %12, %13\n    br_cond %14 ? bb6 : bb7\n"];
  bb6 [label="bb6:\n    %36 = %32 (b)\n    %35 = %31 (a)\n    %33 = %25 [malformed: missing from BBs [bb5]] (x)\n    %15 = %33 [malformed: missing from BBs []] (x)\n    %16 = %15 [malformed: missing from BBs []] (y)\n    br bb8\n"];
  bb7 [label="bb7:\n    %38 = %32 (b)\n    %37 = %31 (a)\n    %34 = %25 [malformed: missing from BBs [bb5]] (x)\n    %17 = const.i64 0\n    %18 = %17 (y)\n    br bb8\n"];
  bb8 [label="bb8:\n    %26 = Φ(%16@bb6, %18@bb7 [malformed: missing from BBs [bb6]]) (y)\n    %39 = Φ(%33@bb6, %34@bb7 [malformed: missing from BBs [bb6, bb7]]) (x)\n    %40 = Φ(%35@bb6, %37@bb7) (a)\n    %41 = Φ(%36@bb6, %38@bb7) (b)\n    %19 = %26 [malformed: missing from BBs []] (y)\n    return %19\n"];
  bb0 -> bb1 [color=green];
  bb0 -> bb2 [color=red];
  bb1 -> bb5;
  bb2 -> bb3 [color=green];
  bb2 -> bb4 [color=red,label="missing vars: x",fontcolor=red];
  bb3 -> bb4;
  bb4 -> bb5 [label="missing vars: x",fontcolor=red];
  bb5 -> bb6 [color=green,label="missing vars: x",fontcolor=red];
  bb5 -> bb7 [color=red,label="missing vars: x",fontcolor=red];
  bb6 -> bb8 [label="missing vars: x, y",fontcolor=red];
  bb7 -> bb8 [label="missing vars: x",fontcolor=red];
}

Error: CFG lowering failed
